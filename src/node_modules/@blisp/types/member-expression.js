const compile = require("@blisp/compiler/compile")
const { memberExpression } = require("@babel/types")

// (. console log) -> console.log
// (get cosole "log") -> console["log"]
function MemberExpression(form) {
  return memberExpression(
    compile.call(this, form[1]),
    compile.call(this, form[2]),
    form[3] && form[3].valueOf() === Symbol.for("true")
  )
}

module.exports = { [Symbol.for("#%member")]: MemberExpression }
