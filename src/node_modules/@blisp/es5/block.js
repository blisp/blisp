const {
  blockStatement,
  expressionStatement,
  isExpression,
} = require("@babel/types")
const expand = require("@blisp/expander/expand")
const rest = require("./rest")

module.exports = function block(form, env) {
  return blockStatement(
    rest(form).map((subForm) => {
      const expanded = expand(subForm, env)
      return isExpression(expanded) ? expressionStatement(expanded) : expanded
    })
  )
}
