const expand = require("@blisp/expander/expand")
const { variableDeclarator, variableDeclaration } = require("@babel/types")
const syntaxToDatum = require("@blisp/expander/syntaxToDatum")

/**
 * (define var (foo "foo"))
 *
 */
module.exports = function define(form, env) {
  return variableDeclaration(
    ...rest(form).map(
      (subForm, index) =>
        index === 0
          ? expand(first(form, env)).name
          : variableDeclarator(
              expand(first(subForm), env),
              second(subForm) && expand(second(subForm), env)
            )
    )
  )
}
